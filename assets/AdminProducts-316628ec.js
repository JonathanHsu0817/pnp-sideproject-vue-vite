import{S as C,_ as Dt}from"./loading-7aff74c7.js";import{g as B,h as kt,_ as Y,r as N,o as E,c as v,b as t,a as A,w as dt,e as O,v as R,F as W,k as Z,n as M,l as Ct,t as I,f as X,m as Mt}from"./index-ba560a6d.js";import{b as tt,d as Vt,r as K,a as j,e as ct,c as St}from"./base-component-c4ce8557.js";var ut={exports:{}},G={exports:{}};/*!
  * Bootstrap scrollbar.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var at;function Lt(){return at||(at=1,function(c,e){(function(o,r){c.exports=r(tt(),Vt(),K())})(B,function(o,r,h){const s=y=>y&&typeof y=="object"&&"default"in y?y:{default:y},u=s(o),f=s(r),_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",p=".sticky-top",i="padding-right",a="margin-right";class w{constructor(){this._element=document.body}getWidth(){const m=document.documentElement.clientWidth;return Math.abs(window.innerWidth-m)}hide(){const m=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,i,n=>n+m),this._setElementAttributes(_,i,n=>n+m),this._setElementAttributes(p,a,n=>n-m)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,i),this._resetElementAttributes(_,i),this._resetElementAttributes(p,a)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(m,n,l){const T=this.getWidth(),V=g=>{if(g!==this._element&&window.innerWidth>g.clientWidth+T)return;this._saveInitialAttribute(g,n);const k=window.getComputedStyle(g).getPropertyValue(n);g.style.setProperty(n,`${l(Number.parseFloat(k))}px`)};this._applyManipulationCallback(m,V)}_saveInitialAttribute(m,n){const l=m.style.getPropertyValue(n);l&&f.default.setDataAttribute(m,n,l)}_resetElementAttributes(m,n){const l=T=>{const V=f.default.getDataAttribute(T,n);if(V===null){T.style.removeProperty(n);return}f.default.removeDataAttribute(T,n),T.style.setProperty(n,V)};this._applyManipulationCallback(m,l)}_applyManipulationCallback(m,n){if(h.isElement(m)){n(m);return}for(const l of u.default.find(m,this._element))n(l)}}return w})}(G)),G.exports}var Q={exports:{}};/*!
  * Bootstrap backdrop.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var lt;function Nt(){return lt||(lt=1,function(c,e){(function(o,r){c.exports=r(j(),K(),ct())})(B,function(o,r,h){const s=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},u=s(o),f=s(h),_="backdrop",p="fade",i="show",a=`mousedown.bs.${_}`,w={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},y={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class m extends f.default{constructor(l){super(),this._config=this._getConfig(l),this._isAppended=!1,this._element=null}static get Default(){return w}static get DefaultType(){return y}static get NAME(){return _}show(l){if(!this._config.isVisible){r.execute(l);return}this._append();const T=this._getElement();this._config.isAnimated&&r.reflow(T),T.classList.add(i),this._emulateAnimation(()=>{r.execute(l)})}hide(l){if(!this._config.isVisible){r.execute(l);return}this._getElement().classList.remove(i),this._emulateAnimation(()=>{this.dispose(),r.execute(l)})}dispose(){this._isAppended&&(u.default.off(this._element,a),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const l=document.createElement("div");l.className=this._config.className,this._config.isAnimated&&l.classList.add(p),this._element=l}return this._element}_configAfterMerge(l){return l.rootElement=r.getElement(l.rootElement),l}_append(){if(this._isAppended)return;const l=this._getElement();this._config.rootElement.append(l),u.default.on(l,a,()=>{r.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(l){r.executeAfterTransition(l,this._getElement(),this._config.isAnimated)}}return m})}(Q)),Q.exports}var J={exports:{}};/*!
  * Bootstrap focustrap.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var nt;function It(){return nt||(nt=1,function(c,e){(function(o,r){c.exports=r(j(),tt(),ct())})(B,function(o,r,h){const s=k=>k&&typeof k=="object"&&"default"in k?k:{default:k},u=s(o),f=s(r),_=s(h),p="focustrap",a=".bs.focustrap",w=`focusin${a}`,y=`keydown.tab${a}`,m="Tab",n="forward",l="backward",T={autofocus:!0,trapElement:null},V={autofocus:"boolean",trapElement:"element"};class g extends _.default{constructor(P){super(),this._config=this._getConfig(P),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return T}static get DefaultType(){return V}static get NAME(){return p}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),u.default.off(document,a),u.default.on(document,w,P=>this._handleFocusin(P)),u.default.on(document,y,P=>this._handleKeydown(P)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,u.default.off(document,a))}_handleFocusin(P){const{trapElement:$}=this._config;if(P.target===document||P.target===$||$.contains(P.target))return;const x=f.default.focusableChildren($);x.length===0?$.focus():this._lastTabNavDirection===l?x[x.length-1].focus():x[0].focus()}_handleKeydown(P){P.key===m&&(this._lastTabNavDirection=P.shiftKey?l:n)}}return g})}(J)),J.exports}var F={exports:{}};/*!
  * Bootstrap component-functions.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var rt;function $t(){return rt||(rt=1,function(c,e){(function(o,r){r(e,j(),K())})(B,function(o,r,h){const u=(_=>_&&typeof _=="object"&&"default"in _?_:{default:_})(r),f=(_,p="hide")=>{const i=`click.dismiss${_.EVENT_KEY}`,a=_.NAME;u.default.on(document,i,`[data-bs-dismiss="${a}"]`,function(w){if(["A","AREA"].includes(this.tagName)&&w.preventDefault(),h.isDisabled(this))return;const y=h.getElementFromSelector(this)||this.closest(`.${a}`);_.getOrCreateInstance(y)[p]()})};o.enableDismissTrigger=f,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})}(F,F.exports)),F.exports}/*!
  * Bootstrap modal.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(c,e){(function(o,r){c.exports=r(K(),j(),tt(),Lt(),St(),Nt(),It(),$t())})(B,function(o,r,h,s,u,f,_,p){const i=L=>L&&typeof L=="object"&&"default"in L?L:{default:L},a=i(r),w=i(h),y=i(s),m=i(u),n=i(f),l=i(_),T="modal",g=".bs.modal",k=".data-api",P="Escape",$=`hide${g}`,x=`hidePrevented${g}`,et=`hidden${g}`,st=`show${g}`,mt=`shown${g}`,ht=`resize${g}`,ft=`click.dismiss${g}`,pt=`mousedown.dismiss${g}`,gt=`keydown.dismiss${g}`,bt=`click${g}${k}`,it="modal-open",Et="fade",ot="show",z="modal-static",vt=".modal.show",At=".modal-dialog",yt=".modal-body",Pt='[data-bs-toggle="modal"]',wt={backdrop:!0,focus:!0,keyboard:!0},Tt={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class S extends m.default{constructor(d,b){super(d,b),this._dialog=w.default.findOne(At,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new y.default,this._addEventListeners()}static get Default(){return wt}static get DefaultType(){return Tt}static get NAME(){return T}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||a.default.trigger(this._element,st,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(it),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){!this._isShown||this._isTransitioning||a.default.trigger(this._element,$).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ot),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const d of[window,this._dialog])a.default.off(d,g);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new n.default({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new l.default({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const b=w.default.findOne(yt,this._dialog);b&&(b.scrollTop=0),o.reflow(this._element),this._element.classList.add(ot);const D=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,a.default.trigger(this._element,mt,{relatedTarget:d})};this._queueCallback(D,this._dialog,this._isAnimated())}_addEventListeners(){a.default.on(this._element,gt,d=>{if(d.key===P){if(this._config.keyboard){d.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),a.default.on(window,ht,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),a.default.on(this._element,pt,d=>{a.default.one(this._element,ft,b=>{if(!(this._element!==d.target||this._element!==b.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(it),this._resetAdjustments(),this._scrollBar.reset(),a.default.trigger(this._element,et)})}_isAnimated(){return this._element.classList.contains(Et)}_triggerBackdropTransition(){if(a.default.trigger(this._element,x).defaultPrevented)return;const b=this._element.scrollHeight>document.documentElement.clientHeight,D=this._element.style.overflowY;D==="hidden"||this._element.classList.contains(z)||(b||(this._element.style.overflowY="hidden"),this._element.classList.add(z),this._queueCallback(()=>{this._element.classList.remove(z),this._queueCallback(()=>{this._element.style.overflowY=D},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),D=b>0;if(D&&!d){const U=o.isRTL()?"paddingLeft":"paddingRight";this._element.style[U]=`${b}px`}if(!D&&d){const U=o.isRTL()?"paddingRight":"paddingLeft";this._element.style[U]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,b){return this.each(function(){const D=S.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof D[d]>"u")throw new TypeError(`No method named "${d}"`);D[d](b)}})}}return a.default.on(document,bt,Pt,function(L){const d=o.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&L.preventDefault(),a.default.one(d,st,U=>{U.defaultPrevented||a.default.one(d,et,()=>{o.isVisible(this)&&this.focus()})});const b=w.default.findOne(vt);b&&S.getInstance(b).hide(),S.getOrCreateInstance(d).toggle(this)}),p.enableDismissTrigger(S),o.defineJQueryPlugin(S),S})})(ut);var xt=ut.exports;const _t=kt(xt),{VITE_API_URL:Ut,VITE_API_PATH:Ot}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_API_PATH:"blacknwhiterabbit",BASE_URL:"/pnp-sideproject-vue-vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Bt={props:["tempProduct","isNew"],data(){return{productModal:""}},methods:{uploadFile(){const c=new FormData;c.append("file-to-upload",this.$refs.fileInput.files[0]);const e=`${Ut}/api/${Ot}/admin/upload`;C.fire({title:"上傳圖片中",timer:2e3,timerProgressBar:!0,didOpen:()=>{C.showLoading()},willClose:()=>{this.$http.post(e,c,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.data.success&&(this.modalProduct.imageUrl=o.data.imageUrl),this.$refs.fileInput.value=""}).catch(o=>{C.fire({icon:"error",title:o.response.data.message}),this.$refs.fileInput.value=""})}})},createImagesUrl(){this.modalProduct.imagesUrl||(this.modalProduct.imagesUrl=[]),this.modalProduct.imagesUrl.push("")},deleteImagesUrl(){this.modalProduct.imagesUrl.pop()},show(){this.productModal.show()},hide(){this.productModal.hide()}},mounted(){this.productModal=new _t(this.$refs.productModal)},computed:{modalProduct(){return this.tempProduct}}},Rt={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},Ft={class:"modal-dialog modal-xl"},qt={class:"modal-content border-0"},Ht={class:"modal-header bg-dark text-white"},Wt={id:"productModalLabel",class:"modal-title"},Yt={key:0},Kt={key:1},jt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),zt={class:"modal-body"},Gt={class:"row"},Qt={class:"col-sm-4"},Jt={class:"mb-3"},Xt=t("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),Zt={class:"mb-3"},te=t("label",{for:"uploadFile",class:"form-label"},"或 上傳圖片",-1),ee=["src"],se=t("h3",{class:"mb-3"},"多圖新增",-1),ie=t("label",{for:"imagesUrl",class:"form-label"},"圖片網址",-1),oe=["onUpdate:modelValue"],ae=["src"],le={key:0},ne={key:1},re={class:"col-sm-8"},de={class:"mb-3"},ce=t("label",{for:"title",class:"form-label"},"標題",-1),ue={class:"row"},_e={class:"mb-3 col-md-6"},me=t("label",{for:"category",class:"form-label"},"分類",-1),he={class:"mb-3 col-md-6"},fe=t("label",{for:"price",class:"form-label"},"單位",-1),pe={class:"row"},ge={class:"mb-3 col-md-6"},be=t("label",{for:"origin_price",class:"form-label"},"原價",-1),Ee={class:"mb-3 col-md-6"},ve=t("label",{for:"price",class:"form-label"},"售價",-1),Ae=t("hr",null,null,-1),ye={class:"mb-3"},Pe=t("label",{for:"description",class:"form-label"},"產品描述",-1),we={class:"mb-3"},Te=t("label",{for:"content",class:"form-label"},"說明內容",-1),De={class:"mb-3"},ke={class:"form-check"},Ce=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Me=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 "),t("button",{type:"button",class:"btn btn-primary"}," 確認 ")],-1);function Ve(c,e,o,r,h,s){const u=N("v-field"),f=N("ErrorMessage"),_=N("v-form");return E(),v("div",Rt,[t("div",Ft,[t("div",qt,[t("div",Ht,[t("h5",Wt,[o.isNew?(E(),v("span",Yt,"新增產品")):(E(),v("span",Kt,"編輯產品"))]),jt]),A(_,{ref:"form",onSubmit:e[12]||(e[12]=p=>c.$emit("updateProducts",s.modalProduct))},{default:dt(({errors:p})=>[t("div",zt,[t("div",Gt,[t("div",Qt,[t("div",Jt,[Xt,O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>s.modalProduct.imageUrl=i),type:"text",class:"form-control mb-2",id:"imageUrl",placeholder:"請輸入圖片連結"},null,512),[[R,s.modalProduct.imageUrl]])]),t("div",Zt,[te,t("input",{type:"file",id:"uploadFile",class:"form-control",ref:"fileInput",onChange:e[1]||(e[1]=(...i)=>s.uploadFile&&s.uploadFile(...i))},null,544)]),t("img",{class:"img-fluid mb-3",src:s.modalProduct.imageUrl},null,8,ee),se,(E(!0),v(W,null,Z(s.modalProduct.imagesUrl,(i,a)=>(E(),v("div",{class:"mb-3",key:a},[ie,O(t("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結",id:"imagesUrl","onUpdate:modelValue":w=>s.modalProduct.imagesUrl[a]=w},null,8,oe),[[R,s.modalProduct.imagesUrl[a]]]),t("img",{class:"img-fluid",src:s.modalProduct.imagesUrl[a]},null,8,ae)]))),128)),!s.modalProduct.imagesUrl||!s.modalProduct.imagesUrl.length||s.modalProduct.imagesUrl[s.modalProduct.imagesUrl.length-1]?(E(),v("div",le,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[2]||(e[2]=(...i)=>s.createImagesUrl&&s.createImagesUrl(...i))}," 新增圖片 ")])):(E(),v("div",ne,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[3]||(e[3]=(...i)=>s.deleteImagesUrl&&s.deleteImagesUrl(...i))}," 刪除圖片 ")]))]),t("div",re,[t("div",de,[ce,A(u,{id:"title",name:"標題",type:"text",class:M(["form-control",{"is-invalid":p.標題}]),placeholder:"請輸入標題",modelValue:s.modalProduct.title,"onUpdate:modelValue":e[4]||(e[4]=i=>s.modalProduct.title=i),rules:"required"},null,8,["modelValue","class"]),A(f,{name:"標題",class:"invalid-feedback"})]),t("div",ue,[t("div",_e,[me,A(u,{id:"category",name:"分類",type:"text",class:M(["form-control",{"is-invalid":p.分類}]),placeholder:"請輸入分類",modelValue:s.modalProduct.category,"onUpdate:modelValue":e[5]||(e[5]=i=>s.modalProduct.category=i),rules:"required"},null,8,["modelValue","class"]),A(f,{name:"分類",class:"invalid-feedback"})]),t("div",he,[fe,A(u,{id:"unit",name:"單位",type:"text",class:M(["form-control",{"is-invalid":p.單位}]),placeholder:"請輸入單位",modelValue:s.modalProduct.unit,"onUpdate:modelValue":e[6]||(e[6]=i=>s.modalProduct.unit=i),rules:"required"},null,8,["modelValue","class"]),A(f,{name:"單位",class:"invalid-feedback"})])]),t("div",pe,[t("div",ge,[be,A(u,{id:"origin_price",name:"原價",type:"number",class:M(["form-control",{"is-invalid":p.原價}]),placeholder:"請輸入原價",modelValue:s.modalProduct.origin_price,"onUpdate:modelValue":e[7]||(e[7]=i=>s.modalProduct.origin_price=i),modelModifiers:{number:!0},min:"0",rules:"required|min_value:0|numeric|integer"},null,8,["modelValue","class"]),A(f,{name:"原價",class:"invalid-feedback"})]),t("div",Ee,[ve,A(u,{id:"price",name:"售價",type:"number",class:M(["form-control",{"is-invalid":p.售價}]),placeholder:"請輸入售價",modelValue:s.modalProduct.price,"onUpdate:modelValue":e[8]||(e[8]=i=>s.modalProduct.price=i),modelModifiers:{number:!0},min:"0",rules:"required|min_value:0|numeric|integer"},null,8,["modelValue","class"]),A(f,{name:"售價",class:"invalid-feedback"})])]),Ae,t("div",ye,[Pe,O(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=i=>s.modalProduct.description=i)},`\r
                    `,512),[[R,s.modalProduct.description]])]),t("div",we,[Te,O(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[10]||(e[10]=i=>s.modalProduct.content=i)},`\r
                    `,512),[[R,s.modalProduct.content]])]),t("div",De,[t("div",ke,[O(t("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[11]||(e[11]=i=>s.modalProduct.is_enabled=i)},null,512),[[Ct,s.modalProduct.is_enabled]]),Ce])])])])]),Me]),_:1},512)])])],512)}const Se=Y(Bt,[["render",Ve]]),Le={props:["delProduct","tempItem"],data(){return{delModal:""}},methods:{show(){this.delModal.show()},hide(){this.delModal.hide()}},mounted(){this.delModal=new _t(this.$refs.delModal)}},Ne={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Ie={class:"modal-dialog"},$e={class:"modal-content border-0"},xe={class:"modal-header bg-danger text-white"},Ue={id:"delProductModalLabel",class:"modal-title"},Oe=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Be={class:"modal-body"},Re={class:"text-danger mb-2"},Fe={class:"modal-footer"},qe=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function He(c,e,o,r,h,s){return E(),v("div",Ne,[t("div",Ie,[t("div",$e,[t("div",xe,[t("h5",Ue,[t("span",null,"刪除產品"+I(o.tempItem.title||`訂單編號 ${o.tempItem.id}`),1)]),Oe]),t("div",Be,[t("p",null,[X("是否刪除"),t("strong",Re,I(o.tempItem.title||`訂單編號 ${o.tempItem.id}`),1),X(" (刪除後將無法恢復)。")])]),t("div",Fe,[qe,t("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=u=>c.$emit("deleteProduct"))}," 確認刪除 ")])])])],512)}const We=Y(Le,[["render",He]]),Ye={props:["pages","getProducts"]},Ke={"aria-label":"Page navigation example"},je={class:"pagination justify-content-end align-items-center mb-0 py-2"},ze=t("span",{"aria-hidden":"true"},"«",-1),Ge=[ze],Qe=["onClick"],Je=t("span",{"aria-hidden":"true"},"»",-1),Xe=[Je];function Ze(c,e,o,r,h,s){return E(),v("nav",Ke,[t("ul",je,[t("li",{class:M(["page-item",{disabled:!o.pages.has_pre}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=u=>o.getProducts(o.pages.current_page-1))},Ge)],2),(E(!0),v(W,null,Z(o.pages.total_pages,u=>(E(),v("li",{class:M(["page-item",{active:u===o.pages.current_page}]),key:u+"page"},[t("a",{class:"page-link",href:"#",onClick:f=>c.$emit("change-page",u)},I(u),9,Qe)],2))),128)),t("li",{class:M(["page-item",{disabled:!o.pages.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=u=>o.getProducts(o.pages.current_page+1))},Xe)],2)])])}const ts=Y(Ye,[["render",Ze]]),{VITE_API_URL:q,VITE_API_PATH:H}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_API_PATH:"blacknwhiterabbit",BASE_URL:"/pnp-sideproject-vue-vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},es={components:{pagination:ts,DelModal:We,ProductModal:Se},data(){return{tempProduct:{imagesUrl:[]},products:[],isNew:!1,pages:{},productModal:"",isLoading:!1}},methods:{getProductsData(c=1){this.isLoading=!0,this.$http.get(`${q}api/${H}/admin/products/?page=${c}`).then(e=>{this.products=e.data.products,this.pages=e.data.pagination,this.isLoading=!1}).catch(e=>{C.fire({icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500}),this.isLoading=!1})},updateProductsData(){this.isLoading=!0;let c=`${q}api/${H}/admin/product`,e="post";this.isNew||(c=`${q}api/${H}/admin/product/${this.tempProduct.id}`,e="put"),this.$http[e](c,{data:this.tempProduct}).then(o=>{this.$refs.productModal.hide(),C.fire({icon:"success",title:o.data.message,showConfirmButton:!1,timer:1500}),this.getProductsData(),this.isLoading=!1}).catch(o=>{C.fire({icon:"error",title:o.response.data.message,showConfirmButton:!1,timer:1500}),this.isLoading=!1})},delProduct(){this.isLoading=!0;const c=`${q}api/${H}/admin/product/${this.tempProduct.id}`;this.$http.delete(c).then(e=>{this.$refs.delModal.hide(),C.fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}),this.getProductsData(),this.isLoading=!1}).catch(e=>{C.fire({icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500}),this.isLoading=!1})},openModal(c,e){c==="new"?(this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.productModal.show()):c==="edit"?(this.tempProduct={...e},this.isNew=!1,this.$refs.productModal.show()):c==="delete"&&(this.tempProduct={...e},this.$refs.delModal.show())}},mounted(){this.getProductsData()}},ss=t("img",{src:Dt,alt:""},null,-1),is={class:"container"},os={class:"text-end mt-4"},as={class:"card shadow-sm rounded-top mt-4"},ls=Mt('<div class="card-header bg-transparent pb-1"><div class="input-group"><span class="input-group-text border-0 bg-transparent ps-8 pe-1"><i class="bi bi-search"></i></span><input type="search" class="form-control border-0 shadow-none"></div></div>',1),ns={class:"card-body p-0"},rs={class:"table-responsive"},ds={class:"table table-hover mb-0"},cs=t("thead",{class:"bg-primary-light"},[t("tr",{class:"align-middle"},[t("th",{scope:"col",class:"ps-4"}),t("th",{scope:"col",class:"py-3"},"分類"),t("th",{scope:"col"},"產品名稱"),t("th",{scope:"col"},"原價"),t("th",{scope:"col"},"售價"),t("th",{scope:"col"},"是否啟用"),t("th",{scope:"col",class:"pe-2"},"編輯")])],-1),us={class:"text-nowrap"},_s=t("td",null,null,-1),ms={key:0,class:"text-success"},hs={key:1},fs={class:"pe-2"},ps={class:"btn-group"},gs=["onClick"],bs=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},[t("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})],-1),Es=["onClick"],vs={class:"card-footer bg-transparent -mt-xs-1"};function As(c,e,o,r,h,s){const u=N("VueLoading"),f=N("pagination"),_=N("ProductModal"),p=N("DelModal");return E(),v(W,null,[A(u,{active:h.isLoading},{default:dt(()=>[ss]),_:1},8,["active"]),t("div",is,[t("div",os,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=i=>s.openModal("new"))}," 建立新的產品 ")]),t("div",as,[ls,t("div",ns,[t("div",rs,[t("table",ds,[cs,t("tbody",us,[(E(!0),v(W,null,Z(h.products,i=>(E(),v("tr",{class:"align-middle",key:i.id},[_s,t("td",null,I(i.category),1),t("td",null,I(i.title),1),t("td",null,I(i.origin_price),1),t("td",null,I(i.price),1),t("td",null,[i.is_enabled==1?(E(),v("span",ms,"啟用")):(E(),v("span",hs,"未啟用"))]),t("td",fs,[t("div",ps,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:a=>s.openModal("edit",i)},[X(" 編輯 "),bs],8,gs),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>s.openModal("delete",i)}," 刪除 ",8,Es)])])]))),128))])])])]),t("div",vs,[A(f,{pages:h.pages,"get-products":s.getProductsData,onChangePage:s.getProductsData},null,8,["pages","get-products","onChangePage"])])])]),A(_,{ref:"productModal","temp-product":h.tempProduct,"is-new":h.isNew,onUpdateProducts:s.updateProductsData},null,8,["temp-product","is-new","onUpdateProducts"]),A(p,{ref:"delModal","temp-item":h.tempProduct,onDeleteProduct:s.delProduct},null,8,["temp-item","onDeleteProduct"])],64)}const Ts=Y(es,[["render",As]]);export{Ts as default};
