import{b as J,e as Pt,r as F,d as O,a as W,f as lt,c as kt,g as Tt}from"./base-component-819b3b85.js";import{_ as H,o as E,c as v,a as t,b as D,v as M,F as R,i as X,j as Dt,k as dt,n as K,t as L,r as j,e as q,d as Mt}from"./index-9d86f50f.js";var rt={exports:{}},z={exports:{}};/*!
  * Bootstrap scrollbar.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var ot;function Ct(){return ot||(ot=1,function(r,e){(function(i,l){r.exports=l(J(),Pt(),F())})(O,function(i,l,f){const s=A=>A&&typeof A=="object"&&"default"in A?A:{default:A},o=s(i),g=s(l),u=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",h=".sticky-top",m="padding-right",c="margin-right";class P{constructor(){this._element=document.body}getWidth(){const _=document.documentElement.clientWidth;return Math.abs(window.innerWidth-_)}hide(){const _=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,m,n=>n+_),this._setElementAttributes(u,m,n=>n+_),this._setElementAttributes(h,c,n=>n-_)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,m),this._resetElementAttributes(u,m),this._resetElementAttributes(h,c)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(_,n,a){const w=this.getWidth(),C=p=>{if(p!==this._element&&window.innerWidth>p.clientWidth+w)return;this._saveInitialAttribute(p,n);const T=window.getComputedStyle(p).getPropertyValue(n);p.style.setProperty(n,`${a(Number.parseFloat(T))}px`)};this._applyManipulationCallback(_,C)}_saveInitialAttribute(_,n){const a=_.style.getPropertyValue(n);a&&g.default.setDataAttribute(_,n,a)}_resetElementAttributes(_,n){const a=w=>{const C=g.default.getDataAttribute(w,n);if(C===null){w.style.removeProperty(n);return}g.default.removeDataAttribute(w,n),w.style.setProperty(n,C)};this._applyManipulationCallback(_,a)}_applyManipulationCallback(_,n){if(f.isElement(_)){n(_);return}for(const a of o.default.find(_,this._element))n(a)}}return P})}(z)),z.exports}var G={exports:{}};/*!
  * Bootstrap backdrop.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var it;function Nt(){return it||(it=1,function(r,e){(function(i,l){r.exports=l(W(),F(),lt())})(O,function(i,l,f){const s=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},o=s(i),g=s(f),u="backdrop",h="fade",m="show",c=`mousedown.bs.${u}`,P={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},A={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class _ extends g.default{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return P}static get DefaultType(){return A}static get NAME(){return u}show(a){if(!this._config.isVisible){l.execute(a);return}this._append();const w=this._getElement();this._config.isAnimated&&l.reflow(w),w.classList.add(m),this._emulateAnimation(()=>{l.execute(a)})}hide(a){if(!this._config.isVisible){l.execute(a);return}this._getElement().classList.remove(m),this._emulateAnimation(()=>{this.dispose(),l.execute(a)})}dispose(){this._isAppended&&(o.default.off(this._element,c),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add(h),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=l.getElement(a.rootElement),a}_append(){if(this._isAppended)return;const a=this._getElement();this._config.rootElement.append(a),o.default.on(a,c,()=>{l.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){l.executeAfterTransition(a,this._getElement(),this._config.isAnimated)}}return _})}(G)),G.exports}var Q={exports:{}};/*!
  * Bootstrap focustrap.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var at;function St(){return at||(at=1,function(r,e){(function(i,l){r.exports=l(W(),J(),lt())})(O,function(i,l,f){const s=T=>T&&typeof T=="object"&&"default"in T?T:{default:T},o=s(i),g=s(l),u=s(f),h="focustrap",c=".bs.focustrap",P=`focusin${c}`,A=`keydown.tab${c}`,_="Tab",n="forward",a="backward",w={autofocus:!0,trapElement:null},C={autofocus:"boolean",trapElement:"element"};class p extends u.default{constructor(y){super(),this._config=this._getConfig(y),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return w}static get DefaultType(){return C}static get NAME(){return h}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),o.default.off(document,c),o.default.on(document,P,y=>this._handleFocusin(y)),o.default.on(document,A,y=>this._handleKeydown(y)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,o.default.off(document,c))}_handleFocusin(y){const{trapElement:$}=this._config;if(y.target===document||y.target===$||$.contains(y.target))return;const x=g.default.focusableChildren($);x.length===0?$.focus():this._lastTabNavDirection===a?x[x.length-1].focus():x[0].focus()}_handleKeydown(y){y.key===_&&(this._lastTabNavDirection=y.shiftKey?a:n)}}return p})}(Q)),Q.exports}var I={exports:{}};/*!
  * Bootstrap component-functions.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var nt;function $t(){return nt||(nt=1,function(r,e){(function(i,l){l(e,W(),F())})(O,function(i,l,f){const o=(u=>u&&typeof u=="object"&&"default"in u?u:{default:u})(l),g=(u,h="hide")=>{const m=`click.dismiss${u.EVENT_KEY}`,c=u.NAME;o.default.on(document,m,`[data-bs-dismiss="${c}"]`,function(P){if(["A","AREA"].includes(this.tagName)&&P.preventDefault(),f.isDisabled(this))return;const A=f.getElementFromSelector(this)||this.closest(`.${c}`);u.getOrCreateInstance(A)[h]()})};i.enableDismissTrigger=g,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})}(I,I.exports)),I.exports}/*!
  * Bootstrap modal.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(r,e){(function(i,l){r.exports=l(F(),W(),J(),Ct(),kt(),Nt(),St(),$t())})(O,function(i,l,f,s,o,g,u,h){const m=S=>S&&typeof S=="object"&&"default"in S?S:{default:S},c=m(l),P=m(f),A=m(s),_=m(o),n=m(g),a=m(u),w="modal",p=".bs.modal",T=".data-api",y="Escape",$=`hide${p}`,x=`hidePrevented${p}`,Z=`hidden${p}`,tt=`show${p}`,ut=`shown${p}`,_t=`resize${p}`,ht=`click.dismiss${p}`,mt=`mousedown.dismiss${p}`,pt=`keydown.dismiss${p}`,ft=`click${p}${T}`,et="modal-open",gt="fade",st="show",Y="modal-static",bt=".modal.show",Et=".modal-dialog",vt=".modal-body",At='[data-bs-toggle="modal"]',yt={backdrop:!0,focus:!0,keyboard:!0},wt={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class N extends _.default{constructor(d,b){super(d,b),this._dialog=P.default.findOne(Et,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new A.default,this._addEventListeners()}static get Default(){return yt}static get DefaultType(){return wt}static get NAME(){return w}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||c.default.trigger(this._element,tt,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(et),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){!this._isShown||this._isTransitioning||c.default.trigger(this._element,$).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(st),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const d of[window,this._dialog])c.default.off(d,p);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new n.default({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new a.default({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const b=P.default.findOne(vt,this._dialog);b&&(b.scrollTop=0),i.reflow(this._element),this._element.classList.add(st);const k=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,c.default.trigger(this._element,ut,{relatedTarget:d})};this._queueCallback(k,this._dialog,this._isAnimated())}_addEventListeners(){c.default.on(this._element,pt,d=>{if(d.key===y){if(this._config.keyboard){d.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),c.default.on(window,_t,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),c.default.on(this._element,mt,d=>{c.default.one(this._element,ht,b=>{if(!(this._element!==d.target||this._element!==b.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(et),this._resetAdjustments(),this._scrollBar.reset(),c.default.trigger(this._element,Z)})}_isAnimated(){return this._element.classList.contains(gt)}_triggerBackdropTransition(){if(c.default.trigger(this._element,x).defaultPrevented)return;const b=this._element.scrollHeight>document.documentElement.clientHeight,k=this._element.style.overflowY;k==="hidden"||this._element.classList.contains(Y)||(b||(this._element.style.overflowY="hidden"),this._element.classList.add(Y),this._queueCallback(()=>{this._element.classList.remove(Y),this._queueCallback(()=>{this._element.style.overflowY=k},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),k=b>0;if(k&&!d){const V=i.isRTL()?"paddingLeft":"paddingRight";this._element.style[V]=`${b}px`}if(!k&&d){const V=i.isRTL()?"paddingRight":"paddingLeft";this._element.style[V]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,b){return this.each(function(){const k=N.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof k[d]>"u")throw new TypeError(`No method named "${d}"`);k[d](b)}})}}return c.default.on(document,ft,At,function(S){const d=i.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&S.preventDefault(),c.default.one(d,tt,V=>{V.defaultPrevented||c.default.one(d,Z,()=>{i.isVisible(this)&&this.focus()})});const b=P.default.findOne(bt);b&&N.getInstance(b).hide(),N.getOrCreateInstance(d).toggle(this)}),h.enableDismissTrigger(N),i.defineJQueryPlugin(N),N})})(rt);var xt=rt.exports;const ct=Tt(xt),Vt={props:["tempProduct","isNew"],data(){return{productModal:""}},methods:{show(){this.productModal.show()},hide(){this.productModal.hide()}},computed:{modalProduct(){return this.tempProduct}},mounted(){this.productModal=new ct(this.$refs.productModal)}},Lt={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},Ot={class:"modal-dialog modal-xl"},It={class:"modal-content border-0"},Ut={class:"modal-header bg-dark text-white"},Bt={id:"productModalLabel",class:"modal-title"},Rt={key:0},Ft={key:1},Wt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ht={class:"modal-body"},Yt={class:"row"},Kt={class:"col-sm-4"},jt={class:"mb-3"},qt=t("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),zt=["src"],Gt=t("h3",{class:"mb-3"},"多圖新增",-1),Qt={key:0},Jt={class:"mb-3"},Xt=t("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),Zt=["onUpdate:modelValue"],te=["src"],ee={key:0},se={key:1},oe={key:1},ie={class:"col-sm-8"},ae={class:"mb-3"},ne=t("label",{for:"title",class:"form-label"},"標題",-1),le={class:"row"},de={class:"mb-3 col-md-6"},re=t("label",{for:"category",class:"form-label"},"分類",-1),ce={class:"mb-3 col-md-6"},ue=t("label",{for:"price",class:"form-label"},"單位",-1),_e={class:"row"},he={class:"mb-3 col-md-6"},me=t("label",{for:"origin_price",class:"form-label"},"原價",-1),pe={class:"mb-3 col-md-6"},fe=t("label",{for:"price",class:"form-label"},"售價",-1),ge=t("hr",null,null,-1),be={class:"mb-3"},Ee=t("label",{for:"description",class:"form-label"},"產品描述",-1),ve={class:"mb-3"},Ae=t("label",{for:"content",class:"form-label"},"說明內容",-1),ye={class:"mb-3"},we={class:"form-check"},Pe=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ke={class:"modal-footer"},Te=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function De(r,e,i,l,f,s){return E(),v("div",Lt,[t("div",Ot,[t("div",It,[t("div",Ut,[t("h5",Bt,[i.isNew?(E(),v("span",Rt,"新增產品")):(E(),v("span",Ft,"編輯產品"))]),Wt]),t("div",Ht,[t("div",Yt,[t("div",Kt,[t("div",jt,[qt,D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.modalProduct.imageUrl=o),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[M,s.modalProduct.imageUrl]]),t("img",{class:"img-fluid",src:s.modalProduct.imagesUrl},null,8,zt)]),Gt,Array.isArray(s.modalProduct.imagesUrl)?(E(),v("div",Qt,[(E(!0),v(R,null,X(s.modalProduct.imagesUrl,(o,g)=>(E(),v("div",{class:"mb-1",key:g},[t("div",Jt,[Xt,D(t("input",{"onUpdate:modelValue":u=>s.modalProduct.imagesUrl[g]=u,type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,Zt),[[M,s.modalProduct.imagesUrl[g]]])]),t("img",{class:"img-fluid",src:o},null,8,te)]))),128)),!s.modalProduct.imagesUrl.length||s.modalProduct.imagesUrl[s.modalProduct.imagesUrl.length-1]?(E(),v("div",ee,[t("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[1]||(e[1]=o=>s.modalProduct.imagesUrl.push(""))}," 新增圖片 ")])):(E(),v("div",se,[t("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=o=>s.modalProduct.imagesUrl.pop())}," 刪除圖片 ")]))])):(E(),v("div",oe,[t("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=(...o)=>r.createImages&&r.createImages(...o))}," 新增圖片 ")]))]),t("div",ie,[t("div",ae,[ne,D(t("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=o=>s.modalProduct.title=o)},null,512),[[M,s.modalProduct.title]])]),t("div",le,[t("div",de,[re,D(t("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[5]||(e[5]=o=>s.modalProduct.category=o)},null,512),[[M,s.modalProduct.category]])]),t("div",ce,[ue,D(t("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=o=>s.modalProduct.unit=o)},null,512),[[M,s.modalProduct.unit]])])]),t("div",_e,[t("div",he,[me,D(t("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[7]||(e[7]=o=>s.modalProduct.origin_price=o)},null,512),[[M,s.modalProduct.origin_price]])]),t("div",pe,[fe,D(t("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[8]||(e[8]=o=>s.modalProduct.price=o)},null,512),[[M,s.modalProduct.price]])])]),ge,t("div",be,[Ee,D(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=o=>s.modalProduct.description=o)},`\r
                  `,512),[[M,s.modalProduct.description]])]),t("div",ve,[Ae,D(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[10]||(e[10]=o=>s.modalProduct.content=o)},`\r
                  `,512),[[M,s.modalProduct.content]])]),t("div",ye,[t("div",we,[D(t("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[11]||(e[11]=o=>s.modalProduct.is_enabled=o)},null,512),[[Dt,s.modalProduct.is_enabled]]),Pe])])])])]),t("div",ke,[Te,t("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=o=>r.$emit("updateProducts",s.modalProduct))}," 確認 ")])])])],512)}const Me=H(Vt,[["render",De]]),Ce={props:["delProduct"],data(){return{delModal:""}},methods:{show(){this.delModal.show()},hide(){this.delModal.hide()}},mounted(){this.delModal=new ct(this.$refs.delModal)}},Ne={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Se={class:"modal-dialog"},$e={class:"modal-content border-0"},xe=dt('<div class="modal-header bg-danger text-white"><h5 id="delProductModalLabel" class="modal-title"><span>刪除產品</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 是否刪除 <strong class="text-danger"></strong> 商品(刪除後將無法恢復)。 </div>',2),Ve={class:"modal-footer"},Le=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Oe(r,e,i,l,f,s){return E(),v("div",Ne,[t("div",Se,[t("div",$e,[xe,t("div",Ve,[Le,t("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=o=>r.$emit("deleteProduct"))}," 確認刪除 ")])])])],512)}const Ie=H(Ce,[["render",Oe]]),Ue={props:["pages","getProducts"]},Be={"aria-label":"Page navigation example"},Re={class:"pagination justify-content-end align-items-center mb-0 py-2"},Fe=t("span",{"aria-hidden":"true"},"«",-1),We=[Fe],He=["onClick"],Ye=t("span",{"aria-hidden":"true"},"»",-1),Ke=[Ye];function je(r,e,i,l,f,s){return E(),v("nav",Be,[t("ul",Re,[t("li",{class:K(["page-item",{disabled:!i.pages.has_pre}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=o=>i.getProducts(i.pages.current_page-1))},We)],2),(E(!0),v(R,null,X(i.pages.total_pages,o=>(E(),v("li",{class:K(["page-item",{active:o===i.pages.current_page}]),key:o+"page"},[t("a",{class:"page-link",href:"#",onClick:g=>r.$emit("change-page",o)},L(o),9,He)],2))),128)),t("li",{class:K(["page-item",{disabled:!i.pages.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=o=>i.getProducts(i.pages.current_page+1))},Ke)],2)])])}const qe=H(Ue,[["render",je]]),{VITE_API_URL:U,VITE_API_PATH:B}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_API_PATH:"blacknwhiterabbit",BASE_URL:"/pnp-sideproject-vue-vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ze={components:{pagination:qe,DelModal:Ie,ProductModal:Me},data(){return{tempProduct:{imagesUrl:[]},products:[],isNew:!1,pages:{},productModal:""}},methods:{getProductsData(r=1){this.$http.get(`${U}api/${B}/admin/products/?page=${r}`).then(e=>{this.products=e.data.products,this.pages=e.data.pagination}).catch(e=>{alert(e.response.data.message)})},updateProductsData(){let r=`${U}api/${B}/admin/product`,e="post";this.isNew||(r=`${U}api/${B}/admin/product/${this.tempProduct.id}`,e="put"),this.$http[e](r,{data:this.tempProduct}).then(i=>{alert(i.data.message),this.$refs.productModal.hide(),this.getProductsData()}).catch(i=>{alert(i.response.data.message)})},delProduct(){const r=`${U}api/${B}/admin/product/${this.tempProduct.id}`;this.$http.delete(r).then(e=>{this.$refs.delModal.hide(),alert(e.data.message),this.getProductsData()}).catch(e=>{alert(e.response.data.message)})},openModal(r,e){r==="new"?(this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.productModal.show()):r==="edit"?(this.tempProduct={...e},this.isNew=!1,this.$refs.productModal.show()):r==="delete"&&(this.tempProduct={...e},this.$refs.delModal.show())},addImages(){this.tempProduct.imagesUrl=[]}},mounted(){this.getProductsData()}},Ge={class:"container"},Qe={class:"text-end mt-4"},Je={class:"card shadow-sm rounded-top mt-4"},Xe=dt('<div class="card-header bg-transparent pb-1"><div class="input-group"><span class="input-group-text border-0 bg-transparent ps-8 pe-1"><i class="bi bi-search"></i></span><input type="search" class="form-control border-0 shadow-none"></div></div>',1),Ze={class:"card-body p-0"},ts={class:"table-responsive"},es={class:"table table-hover mb-0"},ss=t("thead",{class:"bg-primary-light"},[t("tr",{class:"align-middle"},[t("th",{scope:"col",class:"ps-4"}),t("th",{scope:"col",class:"py-3"},"分類"),t("th",{scope:"col"},"產品名稱"),t("th",{scope:"col"},"原價"),t("th",{scope:"col"},"售價"),t("th",{scope:"col"},"是否啟用"),t("th",{scope:"col",class:"pe-2"},"編輯")])],-1),os={class:"text-nowrap"},is=t("td",null,null,-1),as={key:0,class:"text-success"},ns={key:1},ls={class:"pe-2"},ds={class:"btn-group"},rs=["onClick"],cs=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},[t("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})],-1),us=["onClick"],_s={class:"card-footer bg-transparent -mt-xs-1"};function hs(r,e,i,l,f,s){const o=j("pagination"),g=j("ProductModal"),u=j("DelModal");return E(),v(R,null,[t("div",Ge,[t("div",Qe,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=h=>s.openModal("new"))}," 建立新的產品 ")]),t("div",Je,[Xe,t("div",Ze,[t("div",ts,[t("table",es,[ss,t("tbody",os,[(E(!0),v(R,null,X(f.products,h=>(E(),v("tr",{class:"align-middle",key:h.id},[is,t("td",null,L(h.category),1),t("td",null,L(h.title),1),t("td",null,L(h.origin_price),1),t("td",null,L(h.price),1),t("td",null,[h.is_enabled==1?(E(),v("span",as,"啟用")):(E(),v("span",ns,"未啟用"))]),t("td",ls,[t("div",ds,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:m=>s.openModal("edit",h)},[Mt(" 編輯 "),cs],8,rs),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:m=>s.openModal("delete",h)}," 刪除 ",8,us)])])]))),128))])])])]),t("div",_s,[q(o,{pages:f.pages,"get-products":s.getProductsData,onChangePage:s.getProductsData},null,8,["pages","get-products","onChangePage"])])])]),q(g,{ref:"productModal","temp-product":f.tempProduct,"is-new":f.isNew,onUpdateProducts:s.updateProductsData},null,8,["temp-product","is-new","onUpdateProducts"]),q(u,{ref:"delModal",onDeleteProduct:s.delProduct},null,8,["onDeleteProduct"])],64)}const fs=H(ze,[["render",hs]]);export{fs as default};
