import{E as n,G as o}from"./index-f10cf98c.js";import{T as s}from"./toast-ed0faeed.js";const{VITE_API_URL:d,VITE_API_PATH:i}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"blacknwhiterabbit",BASE_URL:"/pnp-sideproject-vue-vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},l=n("orderStore",{state:()=>({order:{products:[],user:{address:"",email:"",name:"",tel:""}},orders:[],pagination:{},currentPage:1,ordersTotal:0,totalCategory:{},chartDataTotal:[],chartDataCategory:[],orderNotPaidNum:0}),actions:{getOrder(r){o.get(`${d}/api/${i}/order/${r}`).then(t=>{console.log(t.data),this.order="",this.order=t.data.order}).catch(t=>{s(t.response.data.message,"error")})},getOrders(r=1){this.currentPage=r,o.get(`${d}/api/${i}/admin/orders?page=${r}`).then(t=>{this.orders=t.data.orders,this.pagination=t.data.pagination}).catch(t=>{s(t.response.data.message,"error")})},getLastOrdersTotal(r){const t=r.filter(e=>e.is_paid===!0);this.ordersTotal=t.reduce((e,a)=>e+a.total,0),this.chartDataTotal=t.map(e=>e.total)},getCategoryChartData(){this.orders.map(t=>t.products).forEach(t=>{Object.values(t).forEach(e=>{this.totalCategory[e.product.category]?this.totalCategory[e.product.category]+=1:this.totalCategory[e.product.category]=1})}),this.chartDataCategory=Object.entries(this.totalCategory)},getNotPaidOrders(){const r=this.orders.filter(t=>t.is_paid===!1);this.orderNotPaidNum=r.length},createDate(r){const t=new Date(r*1e3),e=t.getFullYear(),a=t.getMonth()+1>=10?t.getMonth()+1:`0${t.getMonth()+1}`,c=t.getDate()>=10?t.getDate():`0${t.getDate()}`;return`${e}/${a}/${c}`}}});export{l as o};
