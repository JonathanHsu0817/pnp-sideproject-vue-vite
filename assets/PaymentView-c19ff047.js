import{_ as f,i as w,m as v,r as _,o as i,c as r,d as m,w as y,b as s,F as p,k as T,j as L,a as o,t as e}from"./index-f10cf98c.js";import{o as h}from"./OrderStore-baf16464.js";import{T as V}from"./TimeLine-5158981a.js";import{T as u}from"./toast-ed0faeed.js";import{_ as k}from"./loading-0268191f.js";import"./sweetalert2.all-492a50e4.js";const{VITE_API_URL:P,VITE_API_PATH:E}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"blacknwhiterabbit",BASE_URL:"/pnp-sideproject-vue-vite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$={components:{TimeLine:V},data(){return{step:2,isLoading:!1}},computed:{...w(h,["order"])},methods:{...v(h,["getOrder","createDate"]),postPayment(t){this.isLoading=!0;const c=`${P}/api/${E}/pay/${t}`;this.$http.post(c,t).then(n=>{console.log(this.order.id),u(n.data.message,"success"),this.getOrder(this.order.id),this.$router.replace(`/paymentComplete/${this.order.id}`),this.isLoading=!1}).catch(n=>{u(n.response.data.message,"error"),this.isLoading=!1})},priceFormat(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){this.getOrder(this.$route.params.orderId)}},A=s("img",{src:k,alt:""},null,-1),S={class:"bg-backStage"},N={class:"check-order container py-11"},D=s("h2",{class:"mb-9 text-center"},"確認結帳",-1),F={class:"mb-9"},j={class:"row justify-content-center"},x={class:"col-lg-6 p-5"},B=s("h2",{class:"my-6 fs-4"},"確認付款內容",-1),C={key:0,class:"p-2"},O={class:"col overflow-hidden"},R=["src","alt"],I={class:"col-8"},M={class:"fs-7 fs-md-5 mb-2"},U={class:"d-flex justify-content-between align-items-center"},H={class:"mt-6 text-end"},q={class:"fs-4 fw-bold"},z={class:"col-md-5"},G={class:"p-8 bg-white border"},J={class:"mb-8"},K=s("h2",{class:"mb-6 fs-5"},"訂單資訊",-1),Q={class:"ps-4"},W={class:"row mb-2"},X=s("span",{class:"w-auto me-auto"},"訂購時間 :",-1),Y={class:"row mb-2"},Z=s("span",{class:"w-auto me-auto"},"訂單編號 :",-1),ss={class:"row mb-2"},ts=s("span",{class:"w-auto me-auto me-auto"},"付款狀態 :",-1),es={key:0,class:"text-success p-0 w-auto"},os={key:1,class:"text-danger p-0 w-auto"},as=s("h2",{class:"mb-6 fs-5"},"訂購人資料",-1),is={class:"ps-4"},rs={class:"row mb-2"},cs=s("span",{class:"col-4 me-auto"},"姓名 :",-1),ns={class:"row mb-2"},ds=s("span",{class:"col-4 me-auto"},"Email :",-1),ls={class:"row mb-2"},_s=s("span",{class:"col-4 me-auto"},"電話 :",-1),ms={class:"row mb-2"},ps=s("span",{class:"col-4 me-auto"},"地址 :",-1),hs={class:"row mb-2"},us=s("span",{class:"col-4 me-auto"},"留言 :",-1),bs={class:"text-end"};function gs(t,c,n,fs,l,d){const b=_("VueLoading"),g=_("TimeLine");return i(),r(p,null,[m(b,{active:l.isLoading},{default:y(()=>[A]),_:1},8,["active"]),s("div",S,[s("main",N,[D,s("div",F,[m(g,{step:l.step},null,8,["step"])]),s("div",j,[s("div",x,[B,t.order?(i(),r("ul",C,[(i(!0),r(p,null,T(t.order.products,a=>(i(),r("li",{key:a.id,class:"product-item row align-items-center gx-4 border-bottom py-4"},[s("div",O,[s("img",{src:a.product.imageUrl,alt:a.product.title,class:"object-fix-cover w-100",style:{"max-height":"150px"}},null,8,R)]),s("div",I,[s("h4",M,e(a.product.title),1),s("div",U,[s("div",null,[s("p",null," NT$ "+e(d.priceFormat(Math.round(a.final_total)))+" x "+e(a.qty),1)])])])]))),128))])):L("",!0),s("div",H,[s("p",q,[o(" 總計: "),s("span",null,"NT$ "+e(d.priceFormat(Math.round(t.order.total))),1)])])]),s("section",z,[s("div",G,[s("div",J,[K,s("ul",Q,[s("li",W,[X,o(" "+e(t.createDate(t.order.create_at)),1)]),s("li",Y,[Z,o(" "+e(t.order.id),1)]),s("li",ss,[ts,t.order.is_paid?(i(),r("span",es," 已付款 ")):(i(),r("span",os,[o(" 尚須付款 "),s("b",null,"NT$ "+e(d.priceFormat(Math.round(t.order.total))),1)]))])])]),s("div",null,[as,s("ul",is,[s("li",rs,[cs,o(" "+e(t.order.user.name),1)]),s("li",ns,[ds,o(" "+e(t.order.user.email),1)]),s("li",ls,[_s,o(" "+e(t.order.user.tel),1)]),s("li",ms,[ps,o(" "+e(t.order.user.address),1)]),s("li",hs,[us,o(" "+e(t.order.message),1)])])]),s("div",bs,[s("button",{type:"button",class:"btn btn-primary mt-8 w-lg-100 px-6 px-md-10 py-2 py-md-4 rounded-1",onClick:c[0]||(c[0]=a=>d.postPayment(t.order.id))}," 確認付款 ")])])])])])])],64)}const ks=f($,[["render",gs]]);export{ks as default};
